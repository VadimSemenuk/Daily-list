var exec=require("cordova/exec"),channel=require("cordova/channel");exports._defaults={actions:[],attachments:[],autoClear:!0,badge:null,channel:null,clock:!0,color:null,data:null,defaults:0,foreground:null,group:null,groupSummary:!1,icon:null,id:0,launch:!0,led:!0,lockscreen:!0,mediaSession:null,number:0,priority:0,progressBar:!1,silent:!1,smallIcon:"res://icon",sound:!0,sticky:!1,summary:null,text:"",timeoutAfter:!1,title:"",trigger:{type:"calendar"},vibrate:!1,wakeup:!0},exports._listener={},exports.hasPermission=function(e,t){this._exec("check",null,e,t)},exports.requestPermission=function(e,t){this._exec("request",null,e,t)},exports.schedule=function(o,s,a,e){var t=function(e){var t=this._toArray(o);if(e||!s){for(var r=0,n=t.length;r<n;r++){var i=t[r];this._mergeWithDefaults(i),this._convertProperties(i)}this._exec("schedule",t,s,a)}else s.call(a||this,!1)};e&&e.skipPermission?t.call(this,!0):this.requestPermission(t,this)},exports.update=function(i,o,s,e){var t=function(e){var t=this._toArray(i);if(e||!o){for(var r=0,n=t.length;r<n;r++)this._convertProperties(t[r]);this._exec("update",t,o,s)}else o.call(s||this,!1)};e&&e.skipPermission?t.call(this,!0):this.requestPermission(t,this)},exports.clear=function(e,t,r){e=this._toArray(e),e=this._convertIds(e),this._exec("clear",e,t,r)},exports.clearAll=function(e,t){this._exec("clearAll",null,e,t)},exports.cancel=function(e,t,r){e=this._toArray(e),e=this._convertIds(e),this._exec("cancel",e,t,r)},exports.cancelAll=function(e,t){this._exec("cancelAll",null,e,t)},exports.isPresent=function(e,t,r){var n=this._createCallbackFn(t,r);this.getType(e,function(e){n("unknown"!=e)})},exports.isScheduled=function(e,t,r){this.hasType(e,"scheduled",t,r)},exports.isTriggered=function(e,t,r){this.hasType(e,"triggered",t,r)},exports.hasType=function(e,t,r,n){var i=this._createCallbackFn(r,n);this.getType(e,function(e){i(t==e)})},exports.getType=function(e,t,r){this._exec("type",e,t,r)},exports.getIds=function(e,t){this._exec("ids",0,e,t)},exports.getScheduledIds=function(e,t){this._exec("ids",1,e,t)},exports.getTriggeredIds=function(e,t){this._exec("ids",2,e,t)},exports.get=function(){var e=Array.apply(null,arguments);"function"==typeof e[0]&&e.unshift([]);var t=e[0],r=e[1],n=e[2];Array.isArray(t)?(t=this._convertIds(t),this._exec("notifications",[3,t],r,n)):this._exec("notification",Number(t),r,n)},exports.getAll=function(e,t){this._exec("notifications",0,e,t)},exports.getScheduled=function(e,t){this._exec("notifications",1,e,t)},exports.getTriggered=function(e,t){this._exec("notifications",2,e,t)},exports.addActions=function(e,t,r,n){this._exec("actions",[0,e,t],r,n)},exports.removeActions=function(e,t,r){this._exec("actions",[1,e],t,r)},exports.hasActions=function(e,t,r){this._exec("actions",[2,e],t,r)},exports.getDefaults=function(){var e=Object.assign({},this._defaults);for(var t in e)Array.isArray(e[t])?e[t]=Array.from(e[t]):Object.prototype.isPrototypeOf(e[t])&&(e[t]=Object.assign({},e[t]));return e},exports.setDefaults=function(e){Object.assign(this._defaults,e)},exports.on=function(e,t,r){var n=typeof t;if("function"===n||"string"===n){this._listener[e]||(this._listener[e]=[]);var i=[t,r||window];this._listener[e].push(i)}},exports.un=function(e,t){var r=this._listener[e];if(r)for(var n=0;n<r.length;n++){if(r[n][0]==t){r.splice(n,1);break}}},exports.fireEvent=function(e){var t=Array.apply(null,arguments).slice(1),r=this._listener[e];if(r){t[0]&&"string"==typeof t[0].data&&(t[0].data=JSON.parse(t[0].data));for(var n=0;n<r.length;n++){var i=r[n][0],o=r[n][1];"function"!=typeof i&&(i=o[i]),i.apply(o,t)}}},exports.fireQueuedEvents=function(){exports._exec("ready")},exports._mergeWithDefaults=function(e){var t=this.getDefaults();for(var r in t.hasOwnProperty("sticky")&&(e.sticky=this._getValueFor(e,"sticky","ongoing")),e.sticky&&!0!==e.autoClear&&(e.autoClear=!1),Object.assign(t,e),t)null!==t[r]?e[r]=t[r]:delete e[r],this._defaults.hasOwnProperty(r)||console.warn("Unknown property: "+r);return e.meta={plugin:"cordova-plugin-local-notification",version:"0.9-beta.3"},e},exports._convertProperties=function(e){var t=function(e,t){return isNaN(t[e])?(console.warn(e+" is not a number: "+t[e]),this._defaults[e]):Number(t[e])};return e.id&&(e.id=t("id",e)),e.title&&(e.title=e.title.toString()),e.badge&&(e.badge=t("badge",e)),e.defaults&&(e.defaults=t("defaults",e)),e.smallIcon&&!e.smallIcon.match(/^res:/)&&console.warn('Property "smallIcon" must be of kind res://...'),"boolean"==typeof e.timeout&&(e.timeout=e.timeout?36e5:null),e.timeout&&(e.timeout=t("timeout",e)),e.data=JSON.stringify(e.data),this._convertPriority(e),this._convertTrigger(e),this._convertActions(e),this._convertProgressBar(e),e},exports._convertPriority=function(e){var t=e.priority||e.prio||0;return"string"==typeof t&&(t={min:-2,low:-1,high:1,max:2}[t]||0),!0===e.foreground&&(t=Math.max(t,1)),!1===e.foreground&&(t=Math.min(t,0)),e.priority=t,e},exports._convertActions=function(e){var t=[];if(!e.actions||"string"==typeof e.actions)return e;for(var r=0,n=e.actions.length;r<n;r++){var i=e.actions[r];i.id?(i.id=i.id.toString(),t.push(i)):console.warn("Action with title "+i.title+" has no id and will not be added.")}return e.actions=t,e},exports._convertTrigger=function(e){var t=e.trigger||{},r=this._getValueFor(t,"at","firstAt","date"),n=function(e){var t="object"==typeof e?e.getTime():e;return Math.round(t)};if(e.trigger){t.type||(t.type=t.center?"location":"calendar");var i="calendar"==t.type;return i&&!r&&(r=this._getValueFor(e,"at","firstAt","date")),i&&!t.every&&e.every&&(t.every=e.every),i&&(t.in||t.every)&&(r=null),i&&r&&(t.at=n(r)),i&&t.firstAt&&(t.firstAt=n(t.firstAt)),i&&t.before&&(t.before=n(t.before)),i&&t.after&&(t.after=n(t.after)),t.count||"windows"!=device.platform||(t.count=t.every?5:1),t.count&&"iOS"==device.platform&&console.warn("trigger: { count: } is not supported on iOS."),i||(t.notifyOnEntry=!!t.notifyOnEntry,t.notifyOnExit=!0===t.notifyOnExit,t.radius=t.radius||5,t.single=!!t.single),i&&!t.at||delete t.every,delete e.every,delete e.at,delete e.firstAt,delete e.date,e.trigger=t,e}},exports._convertProgressBar=function(e){var t="Android"==device.platform,r=e.progressBar;if(void 0!==r)return"boolean"==typeof r&&(r=e.progressBar={enabled:r}),"boolean"!=typeof r.enabled&&(r.enabled=!(!r.value&&!r.maxValue&&null===r.indeterminate)),r.value=r.value||0,t&&(r.maxValue=r.maxValue||100,r.indeterminate=!!r.indeterminate),r.enabled=!!r.enabled,r.enabled&&!0===e.clock&&(e.clock="chronometer"),e},exports._createCallbackFn=function(e,t){if("function"==typeof e)return function(){e.apply(t||this,arguments)}},exports._convertIds=function(e){for(var t=[],r=0,n=e.length;r<n;r++)t.push(Number(e[r]));return t},exports._getValueFor=function(e){for(var t=Array.apply(null,arguments).slice(1),r=0,n=t[r],i=t.length;r<i;n=t[++r])if(e.hasOwnProperty(n))return e[n];return null},exports._toArray=function(e){return Array.isArray(e)?Array.from(e):[e]},exports._exec=function(e,t,r,n){var i=this._createCallbackFn(r,n),o=[];Array.isArray(t)?o=t:t&&o.push(t),exec(i,null,"LocalNotification",e,o)},exports._setLaunchDetails=function(){exports._exec("launch",null,function(e){e&&(exports.launchDetails=e)})},"function"!=typeof Object.assign&&(Object.assign=function(e){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var r=arguments[t];if(null!=r)for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}),Array.from||(Array.from=function(){var t=Object.prototype.toString,c=function(e){return"function"==typeof e||"[object Function]"===t.call(e)},n=Math.pow(2,53)-1,l=function(e){var t,r=(t=Number(e),isNaN(t)?0:0!==t&&isFinite(t)?(0<t?1:-1)*Math.floor(Math.abs(t)):t);return Math.min(Math.max(r,0),n)};return function(e){var t=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var r,n=1<arguments.length?arguments[1]:void 0;if(void 0!==n){if(!c(n))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(r=arguments[2])}for(var i,o=l(t.length),s=c(this)?Object(new this(o)):new Array(o),a=0;a<o;)i=t[a],s[a]=n?void 0===r?n(i,a):n.call(r,i,a):i,a+=1;return s.length=o,s}}()),channel.deviceready.subscribe(function(){window.skipLocalNotificationReady||exports.fireQueuedEvents()}),channel.onCordovaReady.subscribe(function(){channel.onCordovaInfoReady.subscribe(function(){exports._setLaunchDetails()})});